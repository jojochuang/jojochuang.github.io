
<!DOCTYPE html>

<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Object store for Hadoop">
    <meta name="keywords" content="hadoop, ozone, hdds, objectstore, scale"/>
    <meta name="robots" content="index,follow"/>
    <meta name="language" content="en"/>

    <title>Apache Ozone</title>

    <base href="/">

    <link rel="canonical" href="https://ozone.apache.org">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
          integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">

    
    <script>
      var _paq = window._paq = window._paq || [];
      

       
      _paq.push(['disableCookies']);
      

      _paq.push(['trackPageView']);
      _paq.push(['enableLinkTracking']);
      (function() {
        var u="//analytics.apache.org/";
        _paq.push(['setTrackerUrl', u+'matomo.php']);
        _paq.push(['setSiteId', '34']);
        var d=document, g=d.createElement('script'),
s=d.getElementsByTagName('script')[0];
        g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
      })();
    </script>
    

</head>

<body>


<div class="topnav">
    <div class="container">
        <ul class="breadcrumb col-md-6">
            <li>
                <img class="asf-logo" src="asf_feather.png"/>
                <a href="https://www.apache.org">Apache Software Foundation</a>
            </li>
        </ul>
        <div class="col-md-6">
            <ul class="pull-right breadcrumb">
                <li><a href="https://www.apache.org/licenses/">License</a></li>
                <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                <li><a href="https://www.apache.org/events/current-event">Events</a></li>
                <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
                <li><a href="https://www.apache.org/security/">Security</a></li>
        </ul>
        </div>
    </div>

    <nav class="navbar navbar-default navbar-static-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <ul class="nav navbar-nav navbar-brand">
                    <li>
                        <img src="ozone-logo.png" alt="Ozone logo"/>
                        <a href="/">Apache Ozone&trade;</a>
                    </li>
                </ul>
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                        data-target="#ozone-menu" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>

            <div id="ozone-menu" class="collapse navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Get Started <span class="caret"></span></a>
                         <ul class="dropdown-menu">
                            <li><a href="getstarted">Get started</a></li>
                            <li><a href="faq">FAQ</a></li>
                            <li><a href="tutorials">Tutorials</a></li>
                            <li><a href="videos">Videos</a></li>
                         </ul>
                    </li>
                    <li><a href="downloads">Download</a></li>
                    <li><a href="docs">Documentation</a></li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Community <span class="caret"></span></a>
                         <ul class="dropdown-menu">
                            <li><a href="community">Get involved</a></li>
                            <li><a href="events">Events</a></li>
                            <li><a href="casestudies">Case studies</a></li>
                            <li><a href="team">Team</a></li>
                         </ul>
                    </li>
                    <li><a href="https://github.com/apache/ozone" target="_blank">Source <small><span class="glyphicon glyphicon-new-window"></span></small></a></li>
                    <li><a href="https://cwiki.apache.org/confluence/display/OZONE" target="_blank">Wiki <small><span class="glyphicon glyphicon-new-window"></span></small></a></li>
                </ul>
            </div>

    </nav>

    <div style="max-height: 200px; overflow: hidden;">
      <img src="sunrise-ozone.jpg" style="width: 100%; left:0px;"/>
    </div>

</div>

</div>

<div class="container">
<h1>Ozone get started</h1>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/mjVXy2WMqDM" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>


<div class="panel panel-default">
    <div class="panel-heading">Requirements</div>
    <div class="panel-body">
        <ul>
<li>Working docker setup</li>
<li>AWS CLI (optional)</li>
</ul>

    </div>
</div>

<h1 id="ozone-in-a-single-container">Ozone in a Single Container</h1>
<p>The easiest way to start up an all-in-one ozone container is to use the latest
docker image from docker hub:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker run -p 9878:9878 -p 9876:9876 apache/ozone
</span></span></code></pre></div><p>This command will pull down the ozone image from docker hub and start all
ozone services in a single container. <!-- raw HTML omitted -->
This container will run the required metadata servers (Ozone Manager, Storage
Container Manager) one data node  and the S3 compatible REST server
(S3 Gateway).</p>
<h1 id="local-multi-container-cluster">Local multi-container cluster</h1>
<p>If you would like to use a more realistic pseudo-cluster where each components
run in own containers, you can start it with a docker-compose file.</p>
<p>We have shipped a docker-compose and an environment file as part of the
container image  that is uploaded to docker hub.</p>
<p>The following commands can be used to extract these files from the image in the docker hub.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker run apache/ozone cat docker-compose.yaml &gt; docker-compose.yaml
</span></span><span style="display:flex;"><span>docker run apache/ozone cat docker-config &gt; docker-config
</span></span></code></pre></div><p>Now you can start the cluster with docker-compose:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker-compose up -d
</span></span></code></pre></div><p>If you need multiple datanodes, we can just scale it up:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker-compose up -d --scale datanode<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>
</span></span></code></pre></div><h1 id="running-s3-clients">Running S3 Clients</h1>
<p>Once the cluster is booted up and ready, you can verify its status by
connecting to the SCM&rsquo;s UI at <a href="http://localhost:9876">http://localhost:9876</a>.</p>
<p>The S3 gateway endpoint will be exposed at port 9878. You can use Ozone&rsquo;s S3
support as if you are working against the real S3.  S3 buckets are stored under
the <code>/s3v</code> volume.</p>
<p>Here is how you create buckets from command line:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>aws s3api --endpoint http://localhost:9878/ create-bucket --bucket<span style="color:#f92672">=</span>bucket1
</span></span></code></pre></div><p>Only notable difference in the above command line is the fact that you have
to tell the <em>endpoint</em> address to the aws s3api command.</p>
<p>Now let us put a simple file into the S3 Bucket hosted by Ozone. We will
start by creating a temporary file that we can upload to Ozone via S3 support.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls -1 &gt; /tmp/testfile
</span></span></code></pre></div><p>This command creates a temporary file that
we can upload to Ozone. The next command actually uploads to Ozone&rsquo;s S3
bucket using the standard aws s3 command line interface.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>aws s3 --endpoint http://localhost:9878 cp --storage-class REDUCED_REDUNDANCY  /tmp/testfile  s3://bucket1/testfile
</span></span></code></pre></div><!-- raw HTML omitted -->
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>aws s3 --endpoint http://localhost:9878 ls s3://bucket1/testfile
</span></span></code></pre></div><!-- raw HTML omitted -->
<h1 id="done">Done!</h1>
<p>Now, move over to <a href="tutorial">tutorial</a> page for more articles.</p>

</div>

<footer>
    <div class="container">
        <div class="col-md-8">
            <div class="col-md-6">
                <h3 class="card-title">Apache</h3>
                <p class="card-text"><a href="https://www.apache.org/">Foundation</a></p>
                <p class="card-text"><a href="https://www.apache.org/licenses/">License</a></p>
                <p class="card-text"><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></p>
                <p class="card-text"><a href="https://www.apache.org/events/current-event">Events</a></p>
                <p class="card-text"><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></p>
                <p class="card-text"><a href="https://www.apache.org/security/">Security</a></p>
                <p class="card-text"><a href="https://privacy.apache.org/policies/privacy-policy-public.html">Privacy</a></p>
            </div>
            <div class="col-md-6">
                <h3 class="card-title">Community</h3>
                <p class="card-text"><a href="/community/">Get involved</a></p>
                <p class="card-text"><a href="https://github.com/apache/ozone">GitHub</a></p>
                <p class="card-text"><a href="https://cwiki.apache.org/confluence/display/OZONE">Wiki</a></p>
                <p class="card-text"><a href="https://the-asf.slack.com/archives/C5RK7PWA1">Slack</a></p>
                
                
            </div>
        </div>
        <div class="col-md-4">
            <h3 class="card-title">Follow us</h3>
            <p class="card-text"><a href="https://twitter.com/apacheozone">Twitter</a></p>
            <p class="card-text"><a href="#">YouTube</a></p>
            <p class="card-text"><a href="#">LinkedIn</a></p>
            
        </div>

        <div class="col-md-12 trademark">
            <p>&copy; 2022 <a href="http://apache.org">The Apache Software Foundation</a>,<br/>
                Apache, Apache Hadoop, Apache Ozone, the Apache feather logo, are trademarks of The Apache Software Foundation.
            <p>
        </div>
    </div>
</footer>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"
        integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS"
        crossorigin="anonymous"></script>


</body>
</html>

